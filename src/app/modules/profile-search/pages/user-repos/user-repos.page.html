<div class="min-h-screen bg-primary-dark flex items-center justify-center">
  @if(isLoading) {
    <app-loader />
  } @else if(errorTitle === 'Usuário não encontrado') {
    <app-error [errorTitle]="errorTitle">
      <p class="text-lg">
        Não conseguimos encontrar nenhum usuário com o nome
        <span class="text-slate-400 font-semibold">{{username}}</span>.
      </p>
      <p class="pb-8 text-lg">
        Verifique se o nome que você forneceu está correto e tente novamente.
      </p>
    </app-error>
  } @else if(errorTitle) {
    <app-error
    [errorTitle]="errorTitle"
    [description]="errorDescription"
    />
  } @else {
    <div class="container w-full rounded-lg p-4">
      <h2 class="text-xl font-bold text-center pt-4 pb-8">
        <a [routerLink]="['/users', username]" class="text-slate-400 font-bold hover:text-teal-400 hover:underline duration-300">{{username}}</a>
        • {{repos.length}} repositórios
      </h2>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        @for(repo of filteredRepos; track repo.name) {
          <app-repository [repository]="repo" />
        }
      </div>
      <div class="my-8 flex items-center justify-center flex-col">
        <button
          (click)="filteredRepos.length === repos.length?
            backToTop() : loadMoreRepos()"
          class="ghost-btn px-8 py-3 rounded-sm">
          {{filteredRepos.length === repos.length? 'Voltar para o topo' : 'Carregar mais repositórios' }}
        </button>
        <div class="text-center pt-8 flex items-center justify-center gap-2">
          <span class="flex items-center justify-center size-4 ring-1 ring-white rounded-full text-sm">?</span>
          <small class="block">Para voltar para a página do perfil, clique no nome de usuário no topo da página.</small>
        </div>
      </div>
    </div>
  }
</div>
